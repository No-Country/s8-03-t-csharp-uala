@page "/profile"
@layout MainLayout
@inject IAccountService AccountService
@inject IDialogService DialogService
<style>
    .back-gray{
        background: #F9F9F9;
    }
    .subtitle{
        font-family: 'Ubuntu';
        font-style: normal;
        font-weight: 700;
        font-size: 16px;
        line-height: 20px;
    }
    .subtitle-2{
        font-family: 'Ubuntu';
        font-style: normal;
        font-weight: 700;
        font-size: 13px;
        line-height: 20px;
    }
    .number-price{
        font-family: 'Ubuntu';
        font-style: normal;
        font-weight: 700;
        font-size: 14px;
        line-height: 16px;
    }
    .td-pay{
        font-size: 12px;
        font-weight: 700;
        opacity: 0.5;
    }
</style>
<PageTitle>Alau - Profile</PageTitle>
<TitleDesc Title="Perfil" Description="Ver datos de tu perfil"></TitleDesc>
<MudText Typo="Typo.h6" Align="Align.Center">
    <b>Perfil</b>
</MudText>
<main class="d-flex flex-column flex-wrap align-center justify-center">
    <div style="width:100%; max-width:900px" class="d-flex flex-column flex-wrap align-center justify-center gap-2">

        <MudPaper Elevation="0" Width="90%" Class="back-gray d-flex flex-column flex-wrap align-center justify-center py-10">
            <div style="width:fit-content;" class="pb-4">
                <MudAvatar Style="width:100px; height:100px">
                    <MudImage Src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Default_pfp.svg/480px-Default_pfp.svg.png"/>
                </MudAvatar>
            </div>
            <MudText Class="subtitle">Adam RichMond</MudText>
        </MudPaper>
        <MudHidden Breakpoint="Breakpoint.Xs" Invert="true">
            <MudPaper Elevation="0" Width="90%" Class="back-gray d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                <MudText Class="pl-1 subtitle-2">Ver mi CVU</MudText>
                <MudButton Variant="Variant.Filled" Color="Color.Secondary" OnClick="OnButtonClicked">Check</MudButton>
            </MudPaper>
            <MudPaper Elevation="0" Width="90%" Class="back-gray d-flex flex-row flex-wrap justify-space-between align-center pa-2">
                <MudText Class="subtitle-2">Total Ganado</MudText>

                <MudText Class="number-price">@ConvertToCurrencyFormat(9550)</MudText>
            </MudPaper>
        </MudHidden>
        <MudHidden Breakpoint="Breakpoint.Xs">
            <div class="d-flex flex-row flex-wrap justify-space-between align-center " style="width:90%;">
                <MudPaper Elevation="0" Width="45%" Class="back-gray d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                    <MudText Class="pl-1 subtitle-2">Ver mi CVU</MudText>
                    <MudButton Variant="Variant.Filled" Color="Color.Secondary" OnClick="OnButtonClicked">Check</MudButton>
                </MudPaper>
                <MudPaper Elevation="0" Width="45%" Class="back-gray d-flex flex-row flex-wrap justify-space-between align-center pa-2">
                    <MudText Class="subtitle-2">Total Ganado</MudText>
                    <MudText Class="number-price">@ConvertToCurrencyFormat(9550)</MudText>
                </MudPaper>
            </div>
        </MudHidden>
        <MudHidden Breakpoint="Breakpoint.Xs">
            <div style="width:90%" class=" d-flex flex-row flex-wrap justify-space-between align-start pa-1">
                <MudPaper Elevation="0" Width="45%" Class="back-gray d-flex flex-column flex-wrap justify-center align-content-space-between pa-1">
                    <div style="width:100%" Class="d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                        <MudText Class="subtitle-2">Ultimas tareas</MudText>
                        <MudText Class="subtitle-2">Importe</MudText>
                    </div>
                    <div style="width:100%" Class="d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                        <MudText Class="td-pay">Musimundo</MudText>
                        <MudText Class="td-pay">@ConvertToCurrencyFormat(12456)</MudText>
                    </div>
                    <div style="width:100%" Class="d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                        <MudText Class="td-pay">Youtube</MudText>
                        <MudText Class="td-pay">@ConvertToCurrencyFormat(2566)</MudText>
                    </div>
                    <div style="width:100%" Class="d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                        <MudText Class="td-pay">Steam</MudText>
                        <MudText Class="td-pay">@ConvertToCurrencyFormat(63356)</MudText>
                    </div>
                </MudPaper>
                <MudPaper Elevation="0" Width="45%" Class="back-gray d-flex flex-row flex-wrap pa-1 gap-2">
                    <div style="width:100%" Class="d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                        <MudText Class="subtitle">Pagar</MudText>
                        <MudText Class="number-price">Total: @ConvertToCurrencyFormat(120000)</MudText>
                    </div>
                    <MudButton Variant="Variant.Filled" Color="Color.Tertiary">Servicios</MudButton>
                    <MudButton Variant="Variant.Filled" Color="Color.Tertiary">Trabajo</MudButton>
                    <MudButton Variant="Variant.Filled" Color="Color.Tertiary">Social</MudButton>
                </MudPaper>
            </div>
        </MudHidden>
        <MudHidden Breakpoint="Breakpoint.Xs" Invert="true">
            <MudPaper Elevation="0" Width="90%" Class="back-gray d-flex flex-column flex-wrap justify-center align-content-space-between pa-1">
                <div style="width:100%" Class="d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                    <MudText Class="subtitle-2">Ultimas tareas</MudText>
                    <MudText Class="subtitle-2">Importe</MudText>
                </div>
                <div style="width:100%" Class="d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                    <MudText Class="td-pay">Musimundo</MudText>
                    <MudText Class="td-pay">@ConvertToCurrencyFormat(12456)</MudText>
                </div>
                <div style="width:100%" Class="d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                    <MudText Class="td-pay">Youtube</MudText>
                    <MudText Class="td-pay">@ConvertToCurrencyFormat(2566)</MudText>
                </div>
                <div style="width:100%" Class="d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                    <MudText Class="td-pay">Steam</MudText>
                    <MudText Class="td-pay">@ConvertToCurrencyFormat(63356)</MudText>
                </div>
            </MudPaper>
            <MudPaper Elevation="0" Width="90%" Class="back-gray d-flex flex-row flex-wrap pa-1 gap-2">
                <div style="width:100%" Class="d-flex flex-row flex-wrap justify-space-between align-center pa-1">
                    <MudText Class="subtitle">Pagar</MudText>
                    <MudText Class="number-price">Total: @ConvertToCurrencyFormat(120000)</MudText>
                </div>
                <MudButton Variant="Variant.Filled" Color="Color.Tertiary">Servicios</MudButton>
                <MudButton Variant="Variant.Filled" Color="Color.Tertiary">Trabajo</MudButton>
                <MudButton Variant="Variant.Filled" Color="Color.Tertiary">Social</MudButton>
            </MudPaper>
        </MudHidden>
    </div>
</main>
@code {
    private Response _dataAccount = null!;
    protected override async Task OnInitializedAsync()
    {
        await DateAccount();
    }

    private static string ConvertToCurrencyFormat(double number)
    {
        return $"${number:n0}";
    }
    private async void OnButtonClicked()
    {
        var result = await DialogService.ShowMessageBox(
            "Mis Datos",
            (MarkupString)$"<b>CVU </b>: {_dataAccount.Result.Cvu} <br/><b>Alias</b>: {_dataAccount.Result.Alias}"
            , cancelText: "Cancel");
        StateHasChanged();
    }

    private async Task DateAccount()
    {
        _dataAccount = await AccountService.GetDataAccountAsync();
    }
}